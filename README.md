Задача:
Создать приложение для android для стриминга пользовательских матчей на YouTube.

Используемые API: 
Нам понадобится java SE, Android Studio, документация YouTube, документация по FFmpeg.

Реализация:
Прежде всего нужно продумать схему всех модулей и их взаимодействия, а уже после рассматривать детальную их реализацию. 
Итак возьмем за основу MVC модель и немного изменим ее. В нашем случае Model - FFmpeg, Viev - интерфейс приложения(кнопочки и понельки), Controller - непосредственно сервера YouTube, но для этого нам нужно дописать несколько запросов к нему.
Что же получилось? 
Пользователь открывает приложение устанавливает параметры для трансляции(теги, название и тд.), после происходит ряд запросов к серверу YouTube для создания самой трансляции(конечно в фоновом режиме, часть из которых будет совершаться на этапе входа в приложение, чтобы пользователю не нужно было ждать). На протяжении всей трансляции пользователь управляет всем процессом стриминга(ведет счет матча и тп.) по средствам интерфейса(Viev).

А теперь более подробно обо всем.
Кака вы наверно заметили, все приложение делится на 3 основных блока: интерфейс приложения, стек запросов к сереверу, управление процессом трансляции. Если с первыми 2 пунктами все ясно, то вот с 3им все сложнее. Стои объяснить, что для этого пункта будем использовать, чтобы стало все ясно. 
FFmpeg - это набор свободных библиотек с открытым исходным кодом, которые позволяют записывать, конвертировать и передавать цифровые аудио- и видеозаписи в различных форматах(определение из Википедии).
Итак, с основными модулями и их связыванием разобрались, теперь расскажу о их детальной реализации. 
Но для начало подведу итоги.

- интерфейсы приложения
    Должен состоять из 2 страничек и быть максимально понятным и легким. На первой странице будет будет выбор настроек самой трансляции, внизу этой стр. будет большая кнопка "начать трансляцию". После будет происходить переход на 2 стр. На которой будет осуществляться доступ к камере и вывод на экран изображения(по сути обычная камера), при этом должна накладываться понель взаимодействия пользователя с приложением(частота кадров, окончание трансляции и тд.), а также понель игрового счета(всетаки приложение для стриминга пользовательских матчей).  
    1) реализовать все стр 
    2) 
    3) 
    ...

- стек запросов к сереверу
    Прежде всего нужно начать с теории. 
    Для начала необходимо ознакомиться с данной докой. https://developers.google.com/youtube/v3/live/getting-started
    YouTube Live Streaming API позволяет управлять событиями на YouTube(трансляция в том числе). Broadcasts и streams, вот на что нужно обратить внимание(cuepoints пока не особо нужны, если вы не хотите вставлять в трансляцию какие-то видеоряды). 
    Итак Broadcast - это сама трансляция, которую можно смотреть(если в кратце, то это окно по которому мы все кликаем, когда хотим посмотреть какойто контент на YouTube). 
    Stream - это поток самого контента(идентификатор видео), тоесть непосредственно множество байт, передаваймых по сети. 
    Важное замечание! Каждая трансляция должна быть связана с одним потоком. Отсюда вытекает вопрос, а как же создаются видео с разным разрешением? Забигая вперед скажу, что для этого используется специальный формат видео HLS (HTTP Live Streaming), но об этом позже.
    Важно! Все запросы к серверу должны осущетвляться со специальным ключем, полученным после авторизации через google аккаунт. Также результаты запросов будут отпрвляться в формате json.
   В контексте данной задачи мне понадобились следующие ресурсы: liveBroadcast и liveStream. Внезапно, не правда ли? 
   Опирации которые можно использовать для ресурсов следующие: list, insert, update, bind, transition, control, delete. Если вы работали с базами данных, то эти опирации знакомы вам, но все же я расскажу о каждой по подробнее в момент их непосредственного использования.
   К liveBroadcast можно использовать све опирации, а к liveStream все кроме bind, transition, control. 
   
   
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

# LiveStream
https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.liveBroadcasts.insert?part=id%252Csnippet%252CcontentDetails%252Cstatus&_h=1&resource=%257B%250A++%2522snippet%2522%253A+%250A++%257B%250A++++%2522scheduledStartTime%2522%253A+%25222018-10-03T20%253A20%253A00%252B03%253A00%2522%252C%250A++++%2522title%2522%253A+%2522hello2%2522%250A++%257D%252C%250A++%2522status%2522%253A+%250A++%257B%250A++++%2522privacyStatus%2522%253A+%2522public%2522%250A++%257D%250A%257D&

https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.liveStreams.insert?part=id%252Csnippet%252Ccdn%252Cstatus&_h=1&resource=%257B%250A++%2522snippet%2522%253A+%250A++%257B%250A++++%2522title%2522%253A+%2522hi%2522%250A++%257D%252C%250A++%2522cdn%2522%253A+%250A++%257B%250A++++%2522format%2522%253A+%25221080p%2522%252C%250A++++%2522ingestionType%2522%253A+%2522rtmp%2522%250A++%257D%250A%257D&

https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.liveBroadcasts.bind?id=Mnjv0fGbx6E&part=id%252Csnippet%252CcontentDetails%252Cstatus&streamId=ENp2jseLjEdhoteLLuknHw1538587984167798&_h=1&

https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.liveBroadcasts.list

https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.liveStreams.list?part=id%252Csnippet%252Ccdn%252Cstatus&id=ENp2jseLjEdhoteLLuknHw1538587051302969&_h=1&

https://developers.google.com/apis-explorer/#p/youtube/v3/youtube.liveBroadcasts.transition?broadcastStatus=complete&id=Mnjv0fGbx6E&part=id%252Csnippet%252CcontentDetails%252Cstatus&_h=4&

https://developers.google.com/youtube/v3/live/docs/liveBroadcasts/transition#params

VBR="2500k"                                    # Bitrate de la vidéo en sortie
FPS="30"                                       # FPS de la vidéo en sortie
QUAL="medium"                                  # Preset de qualité FFMPEG
YOUTUBE_URL="rtmp://a.rtmp.youtube.com/live2"  # URL de base RTMP youtube

SOURCE="udp://239.255.139.0:1234"              # Source UDP (voir les annonces SAP)
KEY="...."                                     # Clé à récupérer sur l'event youtube

ffmpeg \
    -i "$SOURCE" -deinterlace \
    -vcodec libx264 -pix_fmt yuv420p -preset $QUAL -r $FPS -g $(($FPS * 2)) -b:v $VBR \
    -acodec libmp3lame -ar 44100 -threads 6 -qscale 3 -b:a 712000 -bufsize 512k \
    -f flv "$YOUTUBE_URL/$KEY"
    
    
    
   ffmpeg -i 355295.mp4 -deinterlace -vcodec libx264 -pix_fmt yuv420p -preset medium -r 30 -g 60 -b:v 2500k -acodec libmp3lame -ar 44100 -threads 6 -qscale 3 -b:a 712000 -bufsize 512k -f flv rtmp://a.rtmp.youtube.com/live2/bkj4-zk8s-5h14-4rag
    
    

Основной поток:
Видеопоток поступает слишком медленно. Просмотр может идти с буферизацией.
Основной поток:
Текущее разрешение (640x360) не поддерживается на YouTube. Рекомендуем использовать формат 1920 x 1080.
Основной поток:
Низкая скорость передачи данных. У зрителей могут возникнуть проблемы с буферизацией. Проверьте скорость соединения или используйте более низкий битрейт.
3 октября 2018 г., 10:38 (GMT-7)
Основной поток:
Видеопоток поступает слишком медленно. Просмотр может идти с буферизацией.
Основной поток:
Текущее разрешение (640x360) не поддерживается на YouTube. Рекомендуем использовать формат 1920 x 1080.
Основной поток:
Низкая скорость передачи данных. У зрителей могут возникнуть проблемы с буферизацией. Проверьте скорость соединения или используйте более низкий битрейт.
